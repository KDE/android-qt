# Version: 1
# CheckVsReference: 5% (0 0 310 425)


translate 10 10

begin_block draw_lines
  save
    translate 50 50

    save
      setPen 0x7fff0000
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
    restore

    # and then draw the lines the other direction
    save
      setPen 0x7f0000ff
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
      rotate 10
      drawLine 50 0 10 0
    restore

    # and now with a clip
    save
      setClipRect -30 -30 60 60
      setPen 0x7f00ff00
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
      rotate 10
      drawLine 10 0 50 0
    restore

  restore
end_block

save
  translate 100 0
  scale 2 2
  repeat_block draw_lines
restore

translate 0 10

save
  translate 0 200
  setRenderHint Antialiasing
  repeat_block draw_lines
restore

save
  translate 100 200
  scale 2 2
  setRenderHint Antialiasing
  repeat_block draw_lines
restore

translate 320 0

setPen black 0 solidline squarecap

begin_block lines

# 0 -> 45 degress
drawLine 100 100 200 90
drawLine 100 100 200 80
drawLine 100 100 200 70
drawLine 100 100 200 60
drawLine 100 100 200 50
drawLine 100 100 200 40
drawLine 100 100 200 30
drawLine 100 100 200 20
drawLine 100 100 200 10

# 45
drawLine 100 100 200 0

# 45 -> 90
drawLine 100 100 190 0
drawLine 100 100 180 0
drawLine 100 100 170 0
drawLine 100 100 160 0
drawLine 100 100 150 0
drawLine 100 100 140 0
drawLine 100 100 130 0
drawLine 100 100 120 0
drawLine 100 100 110 0

# 90 
drawLine 100 100 100 0

# 90 -> 135
drawLine 100 100 90 0
drawLine 100 100 80 0
drawLine 100 100 70 0
drawLine 100 100 60 0
drawLine 100 100 50 0
drawLine 100 100 40 0
drawLine 100 100 30 0
drawLine 100 100 20 0
drawLine 100 100 10 0

# 135 
drawLine 100 100 0 0

# 135 -> 180 degress
drawLine 100 100 0 10
drawLine 100 100 0 20
drawLine 100 100 0 30
drawLine 100 100 0 40
drawLine 100 100 0 50
drawLine 100 100 0 60
drawLine 100 100 0 70
drawLine 100 100 0 80
drawLine 100 100 0 90

# 180 
drawLine 100 100 0 100

# 180 -> 225
drawLine 100 100 0 110
drawLine 100 100 0 120
drawLine 100 100 0 130
drawLine 100 100 0 140
drawLine 100 100 0 150
drawLine 100 100 0 160
drawLine 100 100 0 170
drawLine 100 100 0 180
drawLine 100 100 0 190

# 225 
drawLine 100 100 0 200

# 225 -> 270
drawLine 100 100 10 200
drawLine 100 100 20 200
drawLine 100 100 30 200
drawLine 100 100 40 200
drawLine 100 100 50 200
drawLine 100 100 60 200
drawLine 100 100 70 200
drawLine 100 100 80 200
drawLine 100 100 90 200

# 270
drawLine 100 100 100 200

# 270 -> 315 degrees
drawLine 100 100 110 200
drawLine 100 100 120 200
drawLine 100 100 130 200
drawLine 100 100 140 200
drawLine 100 100 150 200
drawLine 100 100 160 200
drawLine 100 100 170 200
drawLine 100 100 180 200
drawLine 100 100 190 200

# 315 
drawLine 100 100 200 200

# 315 -> 360 degress
drawLine 100 100 200 100
drawLine 100 100 200 110
drawLine 100 100 200 120
drawLine 100 100 200 130
drawLine 100 100 200 140
drawLine 100 100 200 150
drawLine 100 100 200 160
drawLine 100 100 200 170
drawLine 100 100 200 180
drawLine 100 100 200 190

end_block


setRenderHint Antialiasing
setPen 0x7fff0000 
translate 0.5 0.5
repeat_block lines

setPen 0x000000 8
translate 20 240
drawText 0 0 "Steep slopes:"

translate 0 10

drawLine 0 0 -8 400
translate 20 0
drawLine 0 0 -7 400
translate 20 0
drawLine 0 0 -6 400
translate 20 0
drawLine 0 0 -5 400
translate 20 0
drawLine 0 0 -4 400
translate 20 0
drawLine 0 0 -3 400
translate 20 0
drawLine 0 0 -2 400
translate 20 0
drawLine 0 0 -1 400
translate 20 0
drawLine 0 0 0 400
translate 20 0
drawLine 0 0 1 400
translate 20 0
drawLine 0 0 2 400
translate 20 0
drawLine 0 0 3 400
translate 20 0
drawLine 0 0 4 400
translate 20 0
drawLine 0 0 5 400
translate 20 0
drawLine 0 0 6 400
translate 20 0
drawLine 0 0 7 400
translate 20 0
drawLine 0 0 8 400

resetMatrix

translate 20 450

drawText 0 0 "Zero length lines:"

translate 0 20
drawText 100 10 "Square cap"
save
begin_block points
setPen 0x000000 1 solidline squarecap
drawLine 0 0 0 0
setPen 0x000000 2 solidline squarecap
drawLine 8 0 8 0
setPen 0x000000 3 solidline squarecap
drawLine 16 0 16 0
setPen 0x000000 4 solidline squarecap
drawLine 24 0 24 0
setPen 0x000000 5 solidline squarecap
drawLine 32 0 32 0
setPen 0x000000 6 solidline squarecap
drawLine 40 0 40 0
setPen 0x000000 7 solidline squarecap
drawLine 48 0 48 0
setPen 0x000000 8 solidline squarecap
drawLine 57 0 57 0
setPen 0x000000 9 solidline squarecap
drawLine 67 0 67 0
setPen 0x000000 10 solidline squarecap
drawLine 78 0 78 0
end_block points
restore

translate 0 12
setRenderHint Antialiasing off
repeat_block points
setRenderHint Antialiasing

translate 0 20
drawText 100 10 "Round cap"
save
begin_block points2
setPen 0x000000 1 solidline roundcap
drawLine 0 0 0 0
setPen 0x000000 2 solidline roundcap
drawLine 8 0 8 0
setPen 0x000000 3 solidline roundcap
drawLine 16 0 16 0
setPen 0x000000 4 solidline roundcap
drawLine 24 0 24 0
setPen 0x000000 5 solidline roundcap
drawLine 32 0 32 0
setPen 0x000000 6 solidline roundcap
drawLine 40 0 40 0
setPen 0x000000 7 solidline roundcap
drawLine 48 0 48 0
setPen 0x000000 8 solidline roundcap
drawLine 57 0 57 0
setPen 0x000000 9 solidline roundcap
drawLine 67 0 67 0
setPen 0x000000 10 solidline roundcap
drawLine 78 0 78 0
end_block points2
restore

translate 0 12
setRenderHint Antialiasing off
repeat_block points2
setRenderHint Antialiasing

translate 0 20
drawText 100 10 "Flat cap"
save
begin_block points3
setPen 0x000000 1 solidline flatcap
drawLine 0 0 0 0
setPen 0x000000 2 solidline flatcap
drawLine 8 0 8 0
setPen 0x000000 3 solidline flatcap
drawLine 16 0 16 0
setPen 0x000000 4 solidline flatcap
drawLine 24 0 24 0
setPen 0x000000 5 solidline flatcap
drawLine 32 0 32 0
setPen 0x000000 6 solidline flatcap
drawLine 40 0 40 0
setPen 0x000000 7 solidline flatcap
drawLine 48 0 48 0
setPen 0x000000 8 solidline flatcap
drawLine 57 0 57 0
setPen 0x000000 9 solidline flatcap
drawLine 67 0 67 0
setPen 0x000000 10 solidline flatcap
drawLine 78 0 78 0
end_block points3
restore

translate 0 12
setRenderHint Antialiasing off
repeat_block points3

resetMatrix
translate -220 667.226
drawText 230 -80 "Task 194266 (should see only one line):"
setPen black
drawRect 230.5 -70.5 122 12
setRenderHint Antialiasing
setPen red
drawLine 236.842105263 -63.775117299 247.368421053 -63.775437504

setRenderHint Antialiasing off
resetMatrix
translate 10 640
setPen black
drawText 0 -10 "Task 207147 (should see two lines):"
drawRect 0.5 0.5 64 64
setRenderHint Antialiasing
setPen red

drawLine 4.5 4.5 4.5001 60.5
drawLine 4.5 4.5 60.5 4.5001

setRenderHint Antialiasing off
resetMatrix
translate 10 730
setPen black
drawText 0 -10 "Task 229459 (should see one diagonal line):"
drawRect 0.5 0.5 64 64
setPen red 2 solidline flatcap

setClipRect 2 2 63 63
drawLine 1.5 1.5 33560000 33560000